<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Omer Mohamed Bihi, Dr.&nbsp;Tex Li-Hsing Chi">
<meta name="dcterms.date" content="2024-06-21">

<title>2024MSC - Pathological Cases Analysis at Hargeisa Group Hospital: A Descriptive Study</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">2024MSC</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./agenda.html" rel="" target="">
 <span class="menu-text">Agenda</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./abstract_uploads.html" rel="" target="">
 <span class="menu-text">Abstract and keynote</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./2022_2024_dengue_statistics_HGH.html" rel="" target="">
 <span class="menu-text">Malaria and Dengue Co-infection</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./2024Project_HGH_laparoscopicCentre.html" rel="" target="">
 <span class="menu-text">Laparoscopic Centre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./2024Project_HGH_pathology_LIMS.html" rel="" target="" aria-current="page">
 <span class="menu-text">HGH Pathology LIMS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./thanks.html" rel="" target="">
 <span class="menu-text">Acknowledgements</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./questionnaire.html" rel="" target="">
 <span class="menu-text">Questionnaire</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./h2023MSC.html" rel="" target="">
 <span class="menu-text">2023MSC</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About TMM</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection">Data Collection</a></li>
  <li><a href="#data-interpretation-with-ai-powered-approach" id="toc-data-interpretation-with-ai-powered-approach" class="nav-link" data-scroll-target="#data-interpretation-with-ai-powered-approach">Data Interpretation with AI-powered approach</a></li>
  <li><a href="#data-analysis" id="toc-data-analysis" class="nav-link" data-scroll-target="#data-analysis">Data Analysis</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#surgical-biopsies" id="toc-surgical-biopsies" class="nav-link" data-scroll-target="#surgical-biopsies">Surgical Biopsies</a></li>
  <li><a href="#fnac" id="toc-fnac" class="nav-link" data-scroll-target="#fnac">FNAC</a></li>
  <li><a href="#cytology" id="toc-cytology" class="nav-link" data-scroll-target="#cytology">Cytology</a></li>
  <li><a href="#hematology" id="toc-hematology" class="nav-link" data-scroll-target="#hematology">Hematology</a></li>
  </ul></li>
  <li><a href="#cancer-statistics" id="toc-cancer-statistics" class="nav-link" data-scroll-target="#cancer-statistics">Cancer Statistics</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#conclusion-and-recommendations" id="toc-conclusion-and-recommendations" class="nav-link" data-scroll-target="#conclusion-and-recommendations">Conclusion and Recommendations</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pathological Cases Analysis at Hargeisa Group Hospital: A Descriptive Study</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Omer Mohamed Bihi, Dr.&nbsp;Tex Li-Hsing Chi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 21, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>This study presents a descriptive analysis of 110 pathological cases at Hargeisa Group Hospital (HGH) in Somaliland. The analysis covers surgical biopsies, fine-needle aspiration cytology (FNAC), cytology, and hematology cases. Key findings include a high prevalence of tuberculosis in lymph node specimens and anemia cases. The study also highlights the need for enhanced diagnostic capabilities and improved data management systems.</p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Pathological analysis plays a crucial role in diagnosing and managing various diseases. In resource-limited settings like Somaliland, understanding the spectrum of pathological cases can inform healthcare planning and resource allocation. This study aims to provide insights into the types and frequencies of pathological cases seen at Hargeisa Group Hospital.</p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<section id="data-collection" class="level2">
<h2 class="anchored" data-anchor-id="data-collection">Data Collection</h2>
<p>Data were extracted in Microsoft Access database and collected from the pathology department of Hargeisa Group Hospital between August 2023 and June 2024. The dataset includes 110 cases across four categories: surgical biopsies, FNAC, cytology, and hematology.</p>
</section>
<section id="data-interpretation-with-ai-powered-approach" class="level2">
<h2 class="anchored" data-anchor-id="data-interpretation-with-ai-powered-approach">Data Interpretation with AI-powered approach</h2>
<p>The pathology reports, initially recorded as free-text entries, were processed using natural language processing (NLP) techniques to extract non-structured information. We employed the Claude 3.5 Sonnet large language model (LLM), developed by Anthropic, to interpret and categorize the unstructured text data. This AI (artificial intelligent) powered approach allowed for efficient and consistent extraction of key diagnostic information, specimen types, and patient demographics from the English language used in the reports. The LLM was prompted to identify and classify diagnoses, categorize specimens, and extract relevant clinical details. To ensure accuracy, a two-step validation process was implemented: first, the AI-generated interpretations were reviewed by a trained medical data analyst, and then all cases was selected for review by an experienced surgeon doctor. This process allowed us to leverage the efficiency of AI while maintaining high standards of medical accuracy. The structured data output from this NLP pipeline was then compiled into standardized data tables, facilitating subsequent statistical analysis using R (version 4.4.0). This methodology enabled us to transform complex narrative reports into quantifiable data points, ensuring a comprehensive and reliable basis for our descriptive statistical analysis while minimizing human error in data extraction and classification.</p>
</section>
<section id="data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis">Data Analysis</h2>
<p>Data were managed by de-identification, cleaning, missing data management, and manual curation mentioned in “Data Interpretation with AI-powered approach”. Descriptive statistics were calculated using R (version 4.4.0), copiloted with Claude 3 Opus LLM. Data were analyzed for frequency distributions, age ranges, and gender distributions.</p>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="surgical-biopsies" class="level2">
<h2 class="anchored" data-anchor-id="surgical-biopsies">Surgical Biopsies</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>biopsy_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">c</span>(<span class="st">"Soft tissue lesions"</span>, <span class="st">"Gynecological specimens"</span>, <span class="st">"Gastrointestinal tract"</span>, <span class="st">"Breast"</span>, <span class="st">"Prostate"</span>, <span class="st">"Other"</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage =</span> <span class="fu">c</span>(<span class="fl">29.2</span>, <span class="fl">25.0</span>, <span class="fl">12.5</span>, <span class="fl">8.3</span>, <span class="fl">8.3</span>, <span class="fl">16.7</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(biopsy_data, </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Count"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="st">"Total cases: 24. Age range: 2-80 years (mean: 41 years). Gender: 54.2% female."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Distribution of Surgical Biopsy Cases </caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Category</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Count</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Soft tissue lesions</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">29.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gynecological specimens</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">25.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gastrointestinal tract</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">12.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Breast</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">8.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Prostate</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">8.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">16.7</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> Total cases: 24. Age range: 2-80 years (mean: 41 years). Gender: 54.2% female.</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>Surgical Biopsy (24 cases): The surgical biopsies covered a diverse range of specimens, with soft tissue lesions (29.2%) and gynecological specimens (25.0%) being the most common. The age range was 2-80 years (mean: 41 years), with a slight female predominance (54.2%).</p>
<ul>
<li><p>Soft tissue lesions (n=7, 29.2%): Including cases of epidermal inclusion cyst, intramuscular myxoma, lobular capillary hemangioma, and carcinoma in situ (origin of tissue site: not in record).</p></li>
<li><p>Gynecological specimens (n=6, 25.0%): Including cases of ruptured ectopic pregnancy, gestational choriocarcinoma, partial hydatidiform mole, high-grade serous carcinoma of the ovary, and leiomyoma.</p></li>
<li><p>Gastrointestinal tract (n=3, 12.5%): Two cases of inflammatory bowel disease (Crohn’s disease) and one case of acute on chronic cholecystitis.</p></li>
<li><p>Breast (n=2, 8.3%): One case of benign phyllodes tumor and one case of pseudoangiomatous stromal hyperplasia.</p></li>
<li><p>Prostate (n=2, 8.3%): Both cases were diagnosed as benign nodular prostatic hyperplasia.</p></li>
</ul>
</section>
<section id="fnac" class="level2">
<h2 class="anchored" data-anchor-id="fnac">FNAC</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>fnac_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">c</span>(<span class="st">"Lymph nodes"</span>, <span class="st">"Soft tissue lesions"</span>, <span class="st">"Breast lesions"</span>, <span class="st">"Thyroid"</span>, <span class="st">"Salivary gland"</span>, <span class="st">"Other"</span>),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">13</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">5</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage =</span> <span class="fu">c</span>(<span class="fl">30.4</span>, <span class="fl">28.3</span>, <span class="fl">13.0</span>, <span class="fl">10.9</span>, <span class="fl">6.5</span>, <span class="fl">10.9</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(fnac_data, </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Count"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="fu">paste</span>(<span class="st">"FNAC (46 cases): FNAC was most commonly performed on lymph nodes (30.4%) and soft tissue lesions (28.3%). The age range was 4-70 years (mean: 36 years), with a female predominance (56.5%)."</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Distribution of Fine Needle Aspiration Cytology (FNAC) Cases </caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Category</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Count</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Lymph nodes</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">30.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Soft tissue lesions</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">28.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Breast lesions</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">13.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Thyroid</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">10.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Salivary gland</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">10.9</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> FNAC (46 cases): FNAC was most commonly performed on lymph nodes (30.4%) and soft tissue lesions (28.3%). The age range was 4-70 years (mean: 36 years), with a female predominance (56.5%).</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>FNAC (46 cases): FNAC was most commonly performed on lymph nodes (30.4%) and soft tissue lesions (28.3%). The age range was 4-70 years (mean: 36 years), with a female predominance (56.5%).</p>
<ul>
<li><p>Lymph nodes (n=14, 30.4%): Seven cases of granulomatous lymphadenitis consistent with tuberculosis, three cases of reactive lymphoid hyperplasia, and four cases of suppurative lymphadenitis/abscess.</p></li>
<li><p>Soft tissue lesions (n=13, 28.3%): Predominantly lipomas and one case of keratinous cyst.</p></li>
<li><p>Breast lesions (n=6, 13.0%): Three cases of fibroadenoma, one case of intraductal papilloma, one case of proliferative lesion with atypia, and one case of ductal carcinoma.</p></li>
<li><p>Thyroid (n=5, 10.9%): Three cases of nodular colloid goiter, one case suspicious for follicular neoplasm, and one thyroglossal cyst.</p></li>
<li><p>Salivary gland (n=3, 6.5%): Including one case of high-grade mucoepidermoid carcinoma and two cases of chronic sialadenitis.</p></li>
</ul>
</section>
<section id="cytology" class="level2">
<h2 class="anchored" data-anchor-id="cytology">Cytology</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>cytology_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">c</span>(<span class="st">"Pleural fluid"</span>, <span class="st">"Peritoneal (Ascitic) fluid"</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage =</span> <span class="fu">c</span>(<span class="fl">71.4</span>, <span class="fl">28.6</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(cytology_data, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Count"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="fu">paste</span>(<span class="st">"Total cases: 7. Age range: 9-60 years (mean: 39 years)."</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Gender: 57.1% male."</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Distribution of Cytology Cases </caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Category</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Count</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Pleural fluid</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">71.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Peritoneal (Ascitic) fluid</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">28.6</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> Total cases: 7. Age range: 9-60 years (mean: 39 years).<br>
Gender: 57.1% male.</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>Cytology (7 cases): Cytology specimens were predominantly pleural fluids (71.4%). The age range was 9-60 years (mean: 39 years), with a slight male predominance (57.1%).</p>
<ul>
<li><p>Pleural fluid (n=5, 71.4%): Five cases were negative for malignancy, and one was hemorrhagic. One relative lymphocytosis suggested to do GeneXpert PCR testing</p></li>
<li><p>Peritoneal (Ascitic) fluid (n=2, 28.6%): One case of acute suppurative inflammation and one malignant effusion.</p></li>
</ul>
</section>
<section id="hematology" class="level2">
<h2 class="anchored" data-anchor-id="hematology">Hematology</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>hematology_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Category =</span> <span class="fu">c</span>(<span class="st">"Anemias"</span>, <span class="st">"Thrombocytopenias"</span>, <span class="st">"Leukemias"</span>, <span class="st">"Other conditions"</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage =</span> <span class="fu">c</span>(<span class="fl">66.7</span>, <span class="fl">21.2</span>, <span class="fl">9.0</span>, <span class="fl">3.1</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(hematology_data, </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Count"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="fu">paste</span>(<span class="st">"Total cases: 33. Age range: 1-94 years (mean: 39 years)."</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Gender: 57.6% male."</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Distribution of Hematology Cases </caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Category</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Count</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Anemias</td>
<td style="text-align: center;">22</td>
<td style="text-align: center;">66.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Thrombocytopenias</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">21.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Leukemias</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">9.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other conditions</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3.1</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> Total cases: 33. Age range: 1-94 years (mean: 39 years).<br>
Gender: 57.6% male.</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>Hematology (33 cases): Anemias were the most common hematological disorder (66.7%), followed by thrombocytopenias (21.2%). The age range was 1-94 years (mean: 39 years), with a slight male predominance (57.6%).</p>
<ul>
<li><p>Anemias (n=22, 66.7%): Including macrocytic, microcytic, and hemolytic anemias.</p></li>
<li><p>Thrombocytopenias (n=7, 21.2%): Often associated with other hematological abnormalities. -Leukemias (n=3, 9.0%): Three cases of acute leukemia (two ALL, one AML with non APL type). A 4 y/o boy has confirmed ALL, his bone marrow biopsy revealed Partial Remission of ALL.</p></li>
<li><p>Other conditions: Polycythemia vera (n=1, suggested to do JAK 2 Mutation test), leukomoid reaction (n=2), and cases with atypical lymphocytes.</p></li>
<li><p>5 recommended for further bone marrow biopsy.</p></li>
</ul>
</section>
</section>
<section id="cancer-statistics" class="level1">
<h1>Cancer Statistics</h1>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover table-sm small" data-quarto-postprocess="true">
<caption>Distribution of Cancer Cases</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Hematological</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gynecological</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Breast</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salivary Gland</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Soft Tissue</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Thyroid</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Skin</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Total confirmed cancer cases: 10, in 110 specimen</p>
<ul>
<li>Hematological Malignancies (n=3, 2.7%): Three cases of acute leukemia (two ALL, one AML non-APL type). -Gynecological Cancers (n=2, 1.8%): One case of high-grade serous carcinoma of the ovary and one case of gestational choriocarcinoma.</li>
<li>Breast Cancer (n=1, 0.9%): One case of ductal carcinoma.</li>
<li>Salivary Gland Cancer (n=1, 0.9%): One case of high-grade mucoepidermoid carcinoma.</li>
<li>Soft Tissue Sarcoma (n=1, 0.9%): One case of high-grade sarcoma.</li>
<li>Thyroid Cancer (n=1, 0.9%): One case suspicious for follicular neoplasm.</li>
<li>Skin Cancer (n=1, 0.9%): One case of carcinoma in situ (origin of tissue site not specified).</li>
</ul>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<!--[Discussion of the results, their implications, and comparison with existing literature]
-->
<ol type="1">
<li>The data provides valuable insights into the spectrum of pathological cases at HGH, demonstrating a wide range of conditions across various organ systems and age groups.</li>
<li>There is a notable prevalence of tuberculosis in lymph node specimens and a significant number of anemia cases, reflecting common health challenges in the region.</li>
<li>The cancer statistics, while limited in number, suggest a diverse range of malignancies, with hematological and breast cancers being the most frequent.</li>
<li>The absence of cervical cancer cases and Pap smears indicates a potential gap in women’s health screening services.</li>
<li>The limited diagnostic capabilities for hematological malignancies are evident, with recommendations for bone marrow biopsies in several cases.</li>
</ol>
</section>
<section id="conclusion-and-recommendations" class="level1">
<h1>Conclusion and Recommendations</h1>
<ol type="1">
<li>Implement a cervical cancer screening program to address the apparent gap in women’s health services.</li>
<li>Enhance diagnostic capabilities for hematological malignancies, including the establishment of immunohistochemistry (IHC) service.</li>
<li>Develop a comprehensive cancer registry (National Cancer Control board; based on Pathology Data Management and Reporting Systems; see point 7) to better understand the cancer burden and trends in the region.</li>
<li>Invest in training pathologists and technicians in specialized areas such as cytopathology and hematopathology.</li>
<li>Establish collaborations with international institutions for second opinions on complex cases and to facilitate continuous medical education.</li>
<li>Implement a quality assurance program to ensure accurate and consistent diagnoses across all pathology services.</li>
<li>Improve Pathology Data Management and Reporting Systems: The current pathology reporting system using Microsoft Access, while capable of generating official HGH pathology reports, is facing significant challenges: a) System instability leading to substantial data loss (only about 20.6% of cases are properly recorded in the database compared to paper records). b) Data quality issues requiring manual curation before analysis.</li>
<li>To address these critical problems and enhance the overall efficiency and reliability of pathology reporting at HGH, we suggest the following:
<ul>
<li>Implement an open-source Laboratory Information Management System (LIMS) specifically designed for pathology. Options like OpenLIS or Bahmni (which includes a laboratory module) could be explored. These systems offer:
<ul>
<li>Robust data storage and backup capabilities</li>
<li>Standardized data entry forms to reduce errors</li>
<li>Built-in quality control measures</li>
<li>Customizable reporting features</li>
<li>Potential for integration with other hospital systems</li>
</ul></li>
<li>Initiate a data digitization project:
<ul>
<li>Collaborate with Taiwan Medical Mission (TMM) to digitize all paper-based pathology records dating back to August 2023.</li>
<li>This will create a comprehensive digital archive and allow for more accurate statistical analysis and trending of pathological cases over time.</li>
</ul></li>
<li>Develop a data quality assurance protocol:
<ul>
<li>Implement regular data audits and cleaning procedures.</li>
<li>Provide training to staff on proper data entry and the importance of data integrity.</li>
</ul></li>
<li>Establish a regular system maintenance and upgrade schedule to ensure the long-term stability and reliability of the pathology information system.</li>
</ul></li>
</ol>
<p>Implementing these measures will significantly improve the quality and completeness of pathology data at HGH. This will not only enhance day-to-day operations and patient care but also provide a solid foundation for future research and public health initiatives in Somaliland. The improved data management will allow for more accurate tracking of disease patterns, cancer incidence, and other critical health indicators, ultimately contributing to better health outcomes for the population served by HGH.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>

<!-- This Quarto script provides a structure for your manuscript, incorporating the data analysis and presentation. You'll need to fill in the detailed descriptions, discussion, and other sections as per your template. The script uses R to read the CSV files, perform basic analysis, and create tables. You may need to adjust the file paths and add more detailed analyses as needed.

Remember to create a `references.bib` file for your bibliography if you're citing sources. You can render this Quarto document to HTML, PDF, or other formats as needed.
-->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>